{"version":3,"sources":["services/people.js","App.js","index.js"],"names":["baseURL","services","getAll","axios","get","then","response","data","create","newObject","post","remove","id","delete","update","put","Person","persons","searchTerm","removePerson","confirmRemove","name","window","confirm","filter","person","toLowerCase","includes","map","number","onClick","PersonForm","props","onSubmit","addPerson","value","onChange","handleNameChange","handleNumChange","type","Filter","handleSearchChange","placeholder","Notification","message","className","App","useState","newName","setNewName","newNum","setNewNum","setSearchTerm","setPersons","setMessage","useEffect","peopleService","intialPeople","event","target","preventDefault","forEach","item","find","alert","returnedPerson","setTimeout","catch","error","console","log","p","personObj","concat","JSON","stringify","reponse","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.6fe2d07e.chunk.js","sourcesContent":["import axios from 'axios'\r\n\r\nconst baseURL = '/api/persons'\r\n\r\nconst getAll = () => axios.get(baseURL).then(response => response.data)\r\n\r\nconst create = newObject => axios.post(baseURL, newObject).then(response => response.data)\r\n\r\nconst remove = id => axios.delete(`${baseURL}/${id}`, { data: 'yes' })\r\n\r\nconst update = (id, newObject) => axios.put(`${baseURL}/${id}`, newObject).then(response => response.data)\r\n\r\nconst services = { getAll, create, remove, update }\r\n\r\nexport default services\r\n","import React, { useState, useEffect } from 'react'\r\nimport peopleService from './services/people'\r\n\r\n\r\nconst Person = ({ persons, searchTerm, removePerson }) => {\r\n  const confirmRemove = (name, id) => window.confirm(`Delete ${name}?`) ? id : 0\r\n\r\n  if (searchTerm) {\r\n    const personList = (persons.filter(person => person.name.toLowerCase().includes(searchTerm)))\r\n    return (\r\n      personList.map(person =>\r\n        <div key={person.name}>\r\n          <span > {person.name} {person.number}   </span>\r\n          <button onClick={() => removePerson(confirmRemove(person.name, person.id))}>delete</button>\r\n        </div>\r\n      )\r\n    )\r\n  }\r\n  else {\r\n    return (\r\n      persons.map(person =>\r\n        <div key={person.name}>\r\n          <span > {person.name} {person.number} </span>\r\n          <button onClick={() => removePerson(confirmRemove(person.name, person.id))}>delete</button>\r\n        </div >\r\n      )\r\n    )\r\n  }\r\n}\r\n\r\nconst PersonForm = (props) => {\r\n  return (\r\n    <form onSubmit={props.addPerson}>\r\n      <div> name: <input value={props.name} onChange={props.handleNameChange} /></div>\r\n      <div> number: <input value={props.number} onChange={props.handleNumChange} /></div>\r\n      <div>\r\n        <button type=\"submit\">add</button>\r\n      </div>\r\n    </form>\r\n  )\r\n}\r\n\r\nconst Filter = ({ searchTerm, handleSearchChange }) => {\r\n  return (\r\n    <div>\r\n      filter shown with:<input\r\n        type=\"text\"\r\n        placeholder=\"Search\"\r\n        value={searchTerm}\r\n        onChange={handleSearchChange}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nconst Notification = ({ message, className }) => {\r\n  if (message === '-1') {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <div className={className}>\r\n      {message}\r\n    </div>\r\n  )\r\n}\r\nconst App = () => {\r\n\r\n  const [newName, setNewName] = useState('')\r\n  const [newNum, setNewNum] = useState('')\r\n  const [searchTerm, setSearchTerm] = useState('')\r\n  const [persons, setPersons] = useState([])\r\n  const [message, setMessage] = useState(['-1', ''])\r\n\r\n  useEffect(() => {\r\n    peopleService\r\n      .getAll()\r\n      .then(intialPeople => setPersons(intialPeople))\r\n  }, [])\r\n\r\n  const removePerson = (id) => {\r\n    if (id !== 0) {\r\n      peopleService\r\n        .remove(id)\r\n        .then(() => (peopleService.getAll().then(reponse => setPersons(reponse))))\r\n    }\r\n  }\r\n\r\n  const addPerson = (event) => {\r\n    event.preventDefault()\r\n    let id = 0\r\n    persons.forEach((person) => {\r\n      if (person.name === newName) {\r\n        id = person.id\r\n      }\r\n    })\r\n    if (id !== 0) {\r\n      const item = persons.find(value => value.id === id)\r\n      if (!newNum)\r\n        window.alert(`${newName} is already added to phonebook`)\r\n      else if (newNum === item.number)\r\n        window.alert(`${item.name} is already added to phonebook with number ${item.number}`)\r\n      else if (newNum !== item.number) {\r\n        const updateBool = window.confirm(`${item.name} is already added to phonebook, replace ${item.number} with ${newNum}?`)\r\n        if (updateBool) {\r\n          peopleService\r\n            .update(id, { name: newName, number: newNum })\r\n            .then(returnedPerson => {\r\n              setPersons(persons.map(person => person.id !== id ? person : returnedPerson))\r\n              setMessage([`Updated ${returnedPerson.name}'s number to ${returnedPerson.number}`, 'notification'])\r\n              setTimeout(() => setMessage(['-1', '']), 2000)\r\n            })\r\n            .catch(error => {\r\n              console.log('in error block for id:', id)\r\n              setPersons(persons.filter(p => p.id !== id));\r\n              setMessage([`${item.name} was already removed from the server`, 'error'])\r\n              setTimeout(() => setMessage(['-1', '']), 2000)\r\n            })\r\n        }\r\n      }\r\n    } else {\r\n      const personObj = { name: newName, number: newNum }\r\n      peopleService\r\n        .create(personObj)\r\n        .then(returnedPerson => {\r\n          setPersons(persons.concat(returnedPerson))\r\n          setMessage([`Added ${returnedPerson.name}`, 'notification'])\r\n          setTimeout(() => setMessage(['-1', '']), 2000)\r\n        })\r\n        .catch(error => {\r\n          console.log(error.response.data)\r\n          setMessage([`${JSON.stringify(error.response.data)}`, 'error'])\r\n          setTimeout(() => setMessage(['-1', '']), 2000)\r\n        })\r\n    }\r\n    setNewName('')\r\n    setNewNum('')\r\n  }\r\n\r\n\r\n  const handleSearchChange = (event) => setSearchTerm(event.target.value)\r\n  const handleNameChange = (event) => setNewName(event.target.value)\r\n  const handleNumChange = (event) => setNewNum(event.target.value)\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Notification message={message[0]} className={message[1]} />\r\n      <Filter searchTerm={searchTerm} handleSearchChange={handleSearchChange} />\r\n      <h3>Add a new</h3>\r\n      <PersonForm name={newName} handleNameChange={handleNameChange} number={newNum} handleNumChange={handleNumChange} addPerson={addPerson} />\r\n      <h3>Numbers</h3>\r\n      <Person persons={persons} searchTerm={searchTerm} removePerson={removePerson} />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App","import ReactDOM from 'react-dom'\nimport App from './App'\nimport './index.css'\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)"],"sourceRoot":""}