(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var r=t(14),c=t.n(r),a=t(3),o=t(2),u=t(4),i=t.n(u),s="/api/persons",d={getAll:function(){return i.a.get(s).then((function(e){return e.data}))},create:function(e){return i.a.post(s,e).then((function(e){return e.data}))},remove:function(e){return i.a.delete("".concat(s,"/").concat(e),{data:"yes"})},update:function(e,n){return i.a.put("".concat(s,"/").concat(e),n).then((function(e){return e.data}))}},l=t(0),h=function(e){var n=e.persons,t=e.searchTerm,r=e.removePerson,c=function(e,n){return window.confirm("Delete ".concat(e,"?"))?n:0};return t?n.filter((function(e){return e.name.toLowerCase().includes(t)})).map((function(e){return Object(l.jsxs)("div",{children:[Object(l.jsxs)("span",{children:[" ",e.name," ",e.number,"   "]}),Object(l.jsx)("button",{onClick:function(){return r(c(e.name,e.id))},children:"delete"})]},e.name)})):n.map((function(e){return Object(l.jsxs)("div",{children:[Object(l.jsxs)("span",{children:[" ",e.name," ",e.number," "]}),Object(l.jsx)("button",{onClick:function(){return r(c(e.name,e.id))},children:"delete"})]},e.name)}))},m=function(e){return Object(l.jsxs)("form",{onSubmit:e.addPerson,children:[Object(l.jsxs)("div",{children:[" name: ",Object(l.jsx)("input",{value:e.name,onChange:e.handleNameChange})]}),Object(l.jsxs)("div",{children:[" number: ",Object(l.jsx)("input",{value:e.number,onChange:e.handleNumChange})]}),Object(l.jsx)("div",{children:Object(l.jsx)("button",{type:"submit",children:"add"})})]})},b=function(e){var n=e.searchTerm,t=e.handleSearchChange;return Object(l.jsxs)("div",{children:["filter shown with:",Object(l.jsx)("input",{type:"text",placeholder:"Search",value:n,onChange:t})]})},f=function(e){var n=e.message,t=e.className;return"-1"===n?null:Object(l.jsx)("div",{className:t,children:n})},j=function(){var e=Object(o.useState)(""),n=Object(a.a)(e,2),t=n[0],r=n[1],c=Object(o.useState)(""),u=Object(a.a)(c,2),i=u[0],s=u[1],j=Object(o.useState)(""),O=Object(a.a)(j,2),p=O[0],v=O[1],x=Object(o.useState)([]),g=Object(a.a)(x,2),w=g[0],C=g[1],k=Object(o.useState)(["-1",""]),S=Object(a.a)(k,2),y=S[0],N=S[1];Object(o.useEffect)((function(){d.getAll().then((function(e){return C(e)}))}),[]);return Object(l.jsxs)("div",{children:[Object(l.jsx)("h2",{children:"Phonebook"}),Object(l.jsx)(f,{message:y[0],className:y[1]}),Object(l.jsx)(b,{searchTerm:p,handleSearchChange:function(e){return v(e.target.value)}}),Object(l.jsx)("h3",{children:"Add a new"}),Object(l.jsx)(m,{name:t,handleNameChange:function(e){return r(e.target.value)},number:i,handleNumChange:function(e){return s(e.target.value)},addPerson:function(e){e.preventDefault();var n=0;if(w.forEach((function(e){e.name===t&&(n=e.id)})),0!==n){var c=w.find((function(e){return e.id===n}));if(i){if(i===c.number)window.alert("".concat(c.name," is already added to phonebook with number ").concat(c.number));else if(i!==c.number){window.confirm("".concat(c.name," is already added to phonebook, replace ").concat(c.number," with ").concat(i,"?"))&&d.update(n,{name:t,number:i}).then((function(e){C(w.map((function(t){return t.id!==n?t:e}))),N(["Updated ".concat(e.name,"'s number to ").concat(e.number),"notification"]),setTimeout((function(){return N(["-1",""])}),2e3)})).catch((function(e){console.log("in error block for id:",n),C(w.filter((function(e){return e.id!==n}))),N(["".concat(c.name," was already removed from the server"),"error"]),setTimeout((function(){return N(["-1",""])}),2e3)}))}}else window.alert("".concat(t," is already added to phonebook"))}else{var a={name:t,number:i};d.create(a).then((function(e){C(w.concat(e)),N(["Added ".concat(e.name),"notification"]),setTimeout((function(){return N(["-1",""])}),2e3)})).catch((function(e){console.log(e.response.data),N(["".concat(JSON.stringify(e.response.data)),"error"]),setTimeout((function(){return N(["-1",""])}),2e3)}))}r(""),s("")}}),Object(l.jsx)("h3",{children:"Numbers"}),Object(l.jsx)(h,{persons:w,searchTerm:p,removePerson:function(e){0!==e&&d.remove(e).then((function(){return d.getAll().then((function(e){return C(e)}))}))}})]})};t(38);c.a.render(Object(l.jsx)(j,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.6fe2d07e.chunk.js.map